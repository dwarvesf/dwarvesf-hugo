<!doctype html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Vim kết hợp cùng Golang &mdash; Dwarves Foundation</title>

    <link rel="stylesheet" href="/css/main.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/images/logo.png"/>
    <link href="http://localhost:1313/index.xml" rel="alternate" type="application/rss+xml" title="Dwarves Foundation" />
    <meta name="title" content="http://localhost:1313/">
    <link rel="canonical" href="http://localhost:1313/">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Vim kết hợp cùng Golang"/>
    <meta property="og:url" content="http://localhost:1313/post/vim-go/"/>
    <meta property="og:image" content="http://localhost:1313/images/blog-cover.jpg"/>   
    <meta property="og:site_name" content="Dwarves Foundation">
    <meta property="og:description" content="Vim là một text-editor khá mạnh, được sử dụng trong môi trường máy chủ không có giao diện đồ họa. Trong bài này mình sẽ hướng dẫn các bạn sử dụng Vim như một IDE dành cho Go">
</head>
<body>
    
<section class="site-nav">
    <header>
        <nav id="navigation">
            <a class="brand" href="/">
                <img src="/images/logo.png" alt="Inc">
            </a>
            <a href="/" class="home">Blog</a>
            
            <a href="http://dwarvesf.com/">About</a>
        </nav>
        <nav class="tagline">
            
            
        </nav>
    </header>
</section>



<div class="article-cover">
    <div>
        <img src="/images/blog-cover.jpg" class="image">
    </div>
</div>

<article>

    <div class="container">
        <header>
            <div class="meta">
                By <address><a rel="author" href="http://runikitkat.com" title="Lê Ngọc Thạch" target="_blank">Lê Ngọc Thạch</a></address> &mdash;
                <time pubdate datetime="2015-10-16" title="2015-10-16">October 16, 2015</time>
            </div>
            <h1 class="title">Vim kết hợp cùng Golang</h1>
            <h2 class="subtitle">Giới thiệu Vim và cách sử dụng Vim với Golang</h2>
        </header>

        <section>
            

<ul>
<li>Vim là một text-editor khá mạnh, được sử dụng trong môi trường máy chủ không có giao diện đồ họa. Trong bài này mình sẽ giới thiệu Vim căn bản và hướng dẫn các bạn sử dụng Vim như một IDE dành cho Go</li>
</ul>

<h2 id="vim-là-gì:d6ac5b2eecfc12afd25350cc0802f0f4">Vim là gì?</h2>

<ul>
<li>Vim là text editor cao cấp, phiên bản sau của Vi(Vim = Vi Improved), được viết bởi Bram Moolenaar, lần đầu tiên được đưa ra vào năm 1991.</li>
<li>Vim thường được gọi à &ldquo;editor dành cho dân lập trình&rdquo;, tuy nhiên nó có thể hầu hết các công việc liên quan tới văn bản như sửa chữa văn bản, soạn thảo email hay sửa file configs.</li>
<li>Vim có thể sử dụng làm IDE nhờ các plugins</li>
<li>Vim hỗ trợ đa nền tảng.</li>
</ul>

<h2 id="cài-đặt-và-config:d6ac5b2eecfc12afd25350cc0802f0f4">Cài đặt và config</h2>

<ul>
<li><p>Vim có thể được download tại trang <a href="http://www.vim.org/download.php">vim homepage</a> hoặc cài đặt bằng <a href="http://brew.sh/">brew</a></p>

<pre><code>     brew install vim
</code></pre>

<p>Vì một số plugins phía sau có thể cần tới lua nên các bạn nên cài với câu lệnh:</p>

<pre><code>     brew install vim --with-lua
</code></pre></li>

<li><p>Sau khi cài đặt xong, các bạn tạo một file .vimrc ở ~/ (file này không tự động tạo). File .vimrc này sẽ là nơi chứa toàn bộ config, plugins hay bundle cũng như các function liên quan tới vim.</p></li>

<li><p>Tiếp theo là cài vim plugins manager. Hiện tại mình đang sử dụng <a href="https://github.com/VundleVim/Vundle.vim">Vundle</a>, các bạn có thể sử dụng <a href="https://github.com/tpope/vim-pathogen">panthogen</a> nếu thích.<br />
Vundle sẽ giúp các bạn trong việc config các plugins trong .vimrc, install hay update và một số việc khác.<br />
Để cài đặt, các bạn clone vundle vào thư mục ~/.vim/bundle/ (thư mục .vim sẽ có sau khi cài đặt vim xong)</p>

<pre><code>   git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
</code></pre>

<p>Copy vào .vimrc một số configs và các plugin cơ bản (chú ý dấu &ldquo; trong vim là comment)</p>

<pre><code>set nocompatible              &quot; be iMproved, required
filetype off                  &quot; required


&quot; set the runtime path to include Vundle and initialize
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
&quot; alternatively, pass a path where Vundle should install plugins
&quot;call vundle#begin('~/some/path/here')


&quot; let Vundle manage Vundle, required
Plugin 'VundleVim/Vundle.vim'


&quot; The following are examples of different formats supported.
&quot; Keep Plugin commands between vundle#begin/end.
&quot; plugin on GitHub repo
Plugin 'tpope/vim-fugitive'
&quot; plugin from http://vim-scripts.org/vim/scripts.html
Plugin 'L9'
&quot; Git plugin not hosted on GitHub
Plugin 'git://git.wincent.com/command-t.git'
&quot; git repos on your local machine (i.e. when working on your own plugin)
Plugin 'file:///home/gmarik/path/to/plugin'
&quot; The sparkup vim script is in a subdirectory of this repo called vim.
&quot; Pass the path to set the runtimepath properly.
Plugin 'rstacruz/sparkup', {'rtp': 'vim/'}
&quot; Avoid a name conflict with L9
Plugin 'user/L9', {'name': 'newL9'}


&quot; All of your Plugins must be added before the following line
call vundle#end()            &quot; required
filetype plugin indent on    &quot; required
&quot; To ignore plugin indent changes, instead use:
&quot;filetype plugin on
&quot;
&quot; Brief help
&quot; :PluginList       - lists configured plugins
&quot; :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate
&quot; :PluginSearch foo - searches for foo; append `!` to refresh local cache
&quot; :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal
&quot;
&quot; see :h vundle for more details or wiki for FAQ
&quot; Put your non-Plugin stuff after this line
```
</code></pre>

<p>Tiếp theo để install plugins, các bạn mở vim lên và chạy command sau(bằng cách nhấn Esc):</p>

<pre><code>      :PluginInstall
</code></pre>

<p>Để update plugins, các bạn sử dụng</p>

<pre><code>      :PluginUpdate
</code></pre>

<p>Như vậy là đủ đồ chơi để các bạn có thể sử dụng Vim rồi.</p></li>
</ul>

<h2 id="hướng-dẫn-sử-dụng-căn-bản:d6ac5b2eecfc12afd25350cc0802f0f4">Hướng dẫn sử dụng căn bản.</h2>

<p>Vim là một chương trình soạn thảo được build lần đầu tiên trên UNIX, dùng để làm việc trên môi trường ko có UI. Lúc này bàn phím chưa cũng khá thô sơ, nên các bước di chuyển trên vim hơi khác với bình thường:</p>

<pre><code>
<figure class="third right">
    
        <img src="/images/2015-10-16-hjkl.png"  />
    
    
</figure>


</code></pre>

<p>Các bạn có thể tự tập luyện việc sử dụng các phím này bằng <a href="http://vim-adventures.com/">vim game</a></p>

<p>Để mở một file với vim, các bạn dùng câu lệnh:
        <code>vim file_name</code></p>

<p>Trong vim có 3 mode:<br />
 &ndash; Normal mode - xuất hiện khi bạn ấn Ecs, thường đi kèm đầu tiên bởi dấu &ldquo;:&ldquo;. Ở đây vim sẽ hiểu những gì bạn gõ vào là câu lệnh cho vim. Ví dụ:<code>:w</code> là save văn bản, <code>:q</code> là thoát một văn bản.<br />
       Vim có ngôn ngữ riêng dành cho mình, đó là Vim script. Vim script có thể được execute ở normal mode, ví dụ, để in ra Hello world chúng ta dùng:</p>

<pre><code>      :echo &quot;Hello world&quot;
</code></pre>

<p>&ndash; Insert mode - xuất hiện khi bạn nhấn một trong các nút sau :</p>

<pre><code>      a: Insert vào phía sau con trỏ hiện tại
      A: Insert vào cuối hàng
      i: Insert vào phía trước con trỏ hiện tại
      I: Insert vào đầu hàng
      o: Insert và mở một hàng trống phía dưới
      O: Insert và mở một hàng trống phía trên       
</code></pre>

<p>&ndash; Visual mode &ndash; xuất hiện khi bạn ấn nút v, được dùng cho việc chọn một mảng block text lớn, có thể sử dụng vào việc copy paste hoặc comment&hellip;</p>

<p>Các bạn có thể đọc <a href="http://bullium.com/support/vim.html">vim command</a> để biết thêm về các command trong vim.</p>

<h2 id="sử-dụng-vim-như-go-ide:d6ac5b2eecfc12afd25350cc0802f0f4">Sử dụng Vim như Go IDE</h2>

<p>Để sử dụng Vim như một IDE cho Go, chúng ta cần cài đặt một số plugins cho go.</p>

<p>Quan trọng nhất là <a href="https://github.com/fatih/vim-go/">vim go</a>. Vim go bao gồm tập hợp các thư viện hỗ trợ Go cho vim, ví dụ <code>godef</code>
   <code>gofmt</code> <code>go test</code></p>

<p>Để cài đặt vim go, các bạn copy plugin vào file .vimrc</p>

<pre><code>   Plugin 'fatih/vim-go'
</code></pre>

<p>Sau đó vào normal mode bằng cách nhấn <code>Esc</code> và gõ command:</p>

<pre><code>   :PluginInstall
</code></pre>

<p>Xong, lại tiếp tục gõ command để install Go binaries</p>

<pre><code>    :GoInstallBinaries 
</code></pre>

<p>Chỉ với Vim-go các bạn đã có thể code Go được rồi, nhưng để mọi thứ dễ nhìn hơn cũng như tăng độ hiệu quả, các bạn nên tìm và cài thêm các plugin sau</p>

<pre><code>    ack.vim
    bclose.vim
    bufexplorer
    nerdtree
    nerdcommenter
    csapprox
    vim-fugitive
    gitv
    vim-gitgutter
    syntastic
    neocomplete.vim
    neosnippet.vim
    auto-pairs
</code></pre>

<p>Trong số này:</p>

<p>&ndash; nerdtree: Giúp bạn tổ chức folder trong vim dưới dạng cây thư mục, dễ dàng hơn trong việc mở file và folder. Sau khi cài đặt:
  
<figure class="third right">
    
        <img src="/images/2015-10-16-nerdtree.png"  />
    
    
</figure>

</p>

<p>Nhờ plugin của git, các bạn có thể biết file nào đang sửa, thêm mới và chưa được commit.</p>

<p>&ndash; neocomplete: Hỗ trợ auto complete trong vim.
   
<figure class="third right">
    
        <img src="/images/2015-10-16-neocomplete.png"  />
    
    
</figure>

</p>

<p>&ndash; autopair: Plugin giúp bạn gõ nhanh khi sử dụng các dấu &ldquo; ( &lsquo; [ &lt; bằng cách thêm vào thành một pair &ldquo;&rdquo; () &ldquo; [] &lt;&gt;</p>

<h2 id="cơ-chế-mapping-trong-vim:d6ac5b2eecfc12afd25350cc0802f0f4">Cơ chế mapping trong Vim</h2>

<p>Vim có một khái niệm là mapping, cho phép người dùng mode lại các tổ hợp phím để phục vụ các mục đích cá nhân.</p>

<pre><code>Khi tôi nhấn key này, tôi muốn bạn làm hành động này thay vì những gì bạn hay thường làm  
</code></pre>

<p>Ví dụ:
  Gõ vài dòng trên văn bản bằng vim, sau đó chạy command:</p>

<pre><code>:map - x
</code></pre>

<p>Đặt con trỏ của bạn lên văn bản và nhấn <code>-</code>. Vim lập tức delete kí tự tại vị trí con trỏ, như là bạn đã nhấn <code>x</code></p>

<p>Lúc này mapping của bạn chỉ có hiệu quả trên file text mà bạn đang edit, để mapping hoạt động trên toàn bộ các file khác, bạn cần đặt mapping vào trong file .vimrc<br />
Một số loại mapping thường dùng:</p>

<pre><code>  nmap    : sử dụng khi ở chế độ normal
  imap    : sử dụng trong chế độ insert
  vmap    : sử dụng trong chế độ visual
  noremap : không thể bị override bởi mapping khác
</code></pre>

<p>Ví dụ, khi code Go chúng ta hay dùng godef để tìm định nghĩa của hàm(biến) đó. Để sử dụng với vim-go chúng ta cần vào normal mode và gõ <code>:GoDef</code><br />
Thay vì vậy, mình mapping lại như sau</p>

<pre><code>nnoremap &lt;silent&gt; df :GoDef&lt;cr&gt;

</code></pre>

<p>Có nghĩa là, khi mình ở chế độ normal, ấn tổ hợp df sẽ thực hiện command <code>:GoDef</code>. Map này không bị override bởi bất kì normal map nào khác.<br />
Như vậy, khi bạn muốn tìm kiếm định nghĩa một hàm hay một biến nào đó, bạn sử dụng tổ hợp phím <code>df</code>. Việc này giảm thiểu quá trình typing đi khá nhiều.</p>

<p>Một ví dụ về mapping khác, ví dụ mình hay sử dụng thư viện <a href="https://github.com/k0kubun/pp">print</a> để in ra result ở terminal đẹp hơn. Việc log để debug trong Go diễn ra khá thường xuyên, vì vậy mình đặt một map như sau:</p>

<pre><code>inoremap &lt;silent&gt; pp pp.Println(&quot;&quot;)
</code></pre>

<p>Tức là khi mình gõ trong insert mode <code>pp</code> nó sẽ tự chuyển thành <code>pp.Println(&quot;&quot;)</code>, điều này giúp mình code nhanh hơn.</p>

<p>Các bạn có thể đọc thêm về <a href="http://vimdoc.sourceforge.net/htmldoc/map.html">mapping in vim </a></p>

<h2 id="lời-kết:d6ac5b2eecfc12afd25350cc0802f0f4">Lời kết</h2>

<p>Tất cả mọi thứ dường như đã sẵn sàng! Việc còn lại của bạn là tập luyện:</p>

<ul>
<li>Sử dụng nhuần nhuyễn cách di chuyển trong vim bằng các nút hjkl, cũng như các command cơ bản trong vim.</li>
<li>Tìm thêm các plugins để hỗ trợ thêm cho vim. Một trang mình thấy khá hay và bổ ích về <a href="http://vimawesome.com">plugins cho vim</a></li>
<li>Điểm mạnh của vim chính là customization, các bạn nên tìm cách tạo những mapping hay function giúp tăng tốc độ code.</li>
</ul>

<p>Trên đây là những gì mình tìm hiểu được về Vim và cách sử dụng Vim để code Go. Thế giới của Vim có rất nhiều điều để có thể tìm hiểu, mong nhận được sự đóng góp của mọi người.
Nếu có điều gì muốn trao đổi, liên hệ qua mail thach@dwarvesf.com với mình nha.</p>

            

<div class="social">
    <div>
        <a href="http://news.ycombinator.com/submit" class="hn-share-button">Vote on HN</a>
    </div>
    <div>
        <a href="https://twitter.com/share" class="twitter-share-button"  data-related="dwarvesf" data-text="Vim kết hợp cùng Golang - Giới thiệu Vim và cách sử dụng Vim với Golang">Tweet</a>
    </div>
    <div>
        <div class="fb-like" data-width="150" data-layout="button_count" data-action="like" data-show-faces="true" data-send="false"></div>
    </div>
</div>

        </section>

        <footer>
            <address>
               <img src="/images/chao.png">
                <p>Written by <strong><a rel="author" href="https://twitter.com/runivn" title="Lê Ngọc Thạch" target="_blank">Lê Ngọc Thạch</a></strong><br>
                <span class="muted">Unknown</span>
                </p>
            </address>

        </footer>

        
        <section>
            <div id="disqus_thread"></div>
<script type="text/javascript">
     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//dwarvesf.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

        </section>
        
    </div>
</article>

<footer class="site-footer">
    <div class="container">
        <nav>
            <a href="http://devblog.dwarvesf.com/">Dwarves Foundation</a> &middot;
            <a href="/">Blog</a> &middot;
            
            <a href="http://dwarvesf.com/">About</a>
        </nav>
        
        <nav class="social">
            
            <a href="https://twitter.com/dwarvesf" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
            
            
            <a href="https://github.com/dwarvesf" title="Follow on Github" target="_blank"><i class="icon icon-github black"></i></a>
            
            
            <a href="http://facebook.com/dwarvesf" title="Follow on Facebook" target="_blank"><i class="icon icon-facebook black"></i></a>
                
            <a href="/index.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
    </div>
</footer>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="/js/main.js"></script>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<div id="fb-root"></div>

<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=1526296360976332";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<script>
    (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = '//hnbutton.appspot.com/static/hn.min.js';
        s.parentNode.insertBefore(g, s);
    }(document, 'script'));
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58452796-1', 'auto');
  ga('send', 'pageview');

</script>





  

<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

